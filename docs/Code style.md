# Контроллеры
1. Должны именоваться согласно шаблону `<Название_ресурса_во_множественном_числе>Controller`.

2. Контроллер должен обладать полем сервиса только для чтения, которое именуется согласно шаблону `_<название_сервиса>`.

Пояснение: нельзя называть такое поле просто "_service",
потому что один контроллер может взаимодействовать сразу с несколькими сервисами и это помогает устранить неоднозначность.

```csharp
//Пример:
private readonly CatService _catService;
```

3. При создании переменных типа `ErrorOr<T>` запрещено использовать `var`.
    
4. Создание ресурса должно быть выделено в отдельные методы, которые именуются согласно шаблону `Create<Название_ресурса>From`.

5. Если нужно из контроллера вернуть экземпляр записи контракта, то необходимо выделить метод для проецирования соответствующего POCO класса на контракт,
который должен именоваться согласно шаблону `Map<Название_контракта>`.

6. Методы в контроллере должны быть расположены в следующем порядке:
- Операции создания
- Операции чтения
- Операции обновления
- Операции удаления
- Прочие операции
- Create\<Something\>From
- Map\<Something\>
    
7. Методы в контроллере, которые можно сопоставить с CRUD операциями, нужно называть: [`Create*`, `Get*`, `Update*`, `Delete*`].
    
8. Контроллер ДОЛЖЕН:
- Принимать и обрабатывать запросы пользователя
- Создавать экземпляры POCO классов, посредством их статических методов `Create`
- Посредством сервисов обменивается данными с базой данных
- Отправлять пользователю данные или данные об ошибке.

9. Контроллер НЕ ДОЛЖЕН: 
- Сам управлять созданием POCO классов, который впоследствии нужно сохранить в БД
- Обладать валидационными проверками, а только проверять наличие самих ошибок и пересылать их пользователю
- Напрямую взаимодействовать с контекстом базы данных

# Сервисы

1. Должны именоваться согласно шаблону `<Название_ресурса_в_единственном_числе>Service`.

2. Сервис должен обладать полем репозитория только для чтения, которое именуется согласно шаблону `_<название_репозитория>`.

Пояснение: нельзя называть такое поле просто `_repository`,
потому что один сервис может взаимодействовать сразу с несколькими репозиториями и это помогает устранить неоднозначность.

```csharp
//Пример:
private readonly ICatRepository _catRepository;
```
3. Методы в сервисе должны быть расположены в следующем порядке:
- Операции создания
- Операции чтения
- Операции обновления
- Операции удаления
- Прочие операции

4. Методы в сервисе, которые можно сопоставить с CRUD операциями, нужно называть: [`Store*`, `Get*`, `Update*`, `Delete*`].

Пояснение: сервис не создает экземпляр какого-либо ресурса самостоятельно, а только сохраняет в базе данных тот ресурс, который в него был передан из контроллера.

5. Сервис ДОЛЖЕН:
- Принимать ресурсы от контроллера и сохранять их в БД через посредника (репозиторий)
- Производить проверки и генерировать ошибки, если есть причины, по которым ресурс не может быть создан/найден/обновлен/удален...
- Возвращать в контроллер данные об ошибке или код успешного выполнения операции
- Самостоятельно решать, когда сохранять данные в базе данных

6. Сервис НЕ ДОЛЖЕН:
- Создавать экземпляры POCO классов
- Напрямую взаимодействовать с контекстом базы данных

# Репозитории

1. Должны именоваться согласно шаблону `<Название_ресурса_в_единственном_числе>Repository`.

2. Репозиторий должен обладать полем контекста базы данных только для чтения, которое именуется `_database`.

3. Методы в репозитории должны быть расположены в следующем порядке:
- Операции создания
- Операции чтения
- Операции обновления
- Операции удаления
- Прочие операции
- SaveChanges

4. Методы в репозитории, которые можно сопоставить с CRUD операциями, нужно называть: [`Add*`, `Get*`, `Update*`, `Remove*`].

Пояснение: такое именование выбрано, чтобы соответстовать соответствующим методам в EF Core.

5. Репозиторий должен:
- Напрямую взаимодействовать с базой данных, через соответствующий контекст

6. Репозиторий не должен:
- Создавать экземпляры POCO классов
- Производить валидационные проверки и генерировать ошибки
- Самостоятельно решать, когда сохранять данные в базе данных
- Возвращать данные в формате `ErrorOr<T>`

# POCO классы

1. Подразумевается класс, не обремененный зависимостями (кроме тесной связи с ErrorOr), который представляет собой данные, которые могут сохраняться в БД.

2. Работает в стиле DDD-like, поэтому не может создаваться через конструктор (он должен быть приватным), но обладает статическим методом Create,
который выступает своеобразной фабрикой экземпляров этого класса.

3. Метод Create обладает всеми необходимыми проверками, чтобы гарантировать валидность объекта и возвращает экземпляр объекта или ошибку.

4. Все поля объекта публичные на чтение и приватные на изменение.

5. Возможность изменения объекта определяется его публичными методами, которые изменяют объект или возвращают ошибку, если модификация такими данными невозможна.

6. Поля содержащие значение уникального идентификатора должны называться по шаблону `<Название_класса>Id`.

# Контракты

1. Представляют собой записи (records), которые определяют какие данные отправляет/получает backend.

2. Поля записи могут состоять только из базовых типов.

# Подключение пространств имен

1. Любые подключения пространств имен должны быть глобальными и быть выделенными в отдельный файл `Usings.cs`.

2. Подключения пространст имен должны производиться в следующем порядке:
- Пространства имен System
- Пространства имен Microsoft
- Пространства имен сторонних библиотек
- Пространства имен определенные в этом проекте
- Пространства имен WebAPI контрактов
